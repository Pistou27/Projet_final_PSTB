<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat RAG - Projet Final GenIA</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/static/css/variables.css">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <h1>C'est très Simple!</h1>
        <p>Posez-moi des questions sur l'un des jeux disponibles et je réponderai au mieux</p>
        
        <nav class="header-buttons">
            <button id="toggleSidebarBtn" class="header-btn" title="Afficher/Masquer les sessions">
                💬 Sessions
            </button>
            <button id="statusBtn" class="header-btn">
                📊 Statut des règles
            </button>
            <button id="ingestBtn" class="header-btn">
                📂 Indexer les règles
            </button>
            <button id="llmProviderBtn" class="header-btn" title="Basculer entre Mistral et Groq">
                🤖 Mistral
            </button>
            <button id="toggleDocsBtn" class="header-btn" title="Afficher/Masquer les documents">
                📊 Règles
            </button>
        </nav>
    </header>

    <!-- Main Application Container -->
    <main class="chat-container" id="chatContainer">
        <!-- Sessions Sidebar -->
        <aside class="sessions-sidebar" id="sessionsSidebar">
            <header class="sessions-header">
                <h3>💬 Sessions</h3>
                <button class="session-btn close-sessions-btn" onclick="window.toggleSidebar()" aria-label="Fermer les sessions">✕</button>
            </header>
            
            <div class="sessions-actions">
                <button class="new-session-btn" onclick="window.createNewSession()">
                    ➕ Nouvelle session
                </button>
                <button class="delete-all-sessions-btn" onclick="window.deleteAllSessions()">
                    🗑️ Supprimer toutes les sessions
                </button>
            </div>
            
            <div class="sessions-list" id="sessionsList" role="list">
                <!-- Sessions will be loaded here -->
            </div>
        </aside>

        <!-- Chat Area -->
        <section class="chat-main" role="main">            
            <div class="messages" id="messages" role="log" aria-live="polite" aria-label="Messages de conversation">
                <div class="message assistant-message">
                    <div>Bonjour ! Je suis votre assistant spécialisé dans l'analyse des règles de jeux.</div>
                    <div>Posez-moi des questions sur les documents disponibles et je vous répondrai avec les références des pages sources.</div>
                </div>
            </div>

            <form class="input-container" role="form" aria-label="Envoyer un message">
                <div class="input-group">
                    <label for="messageInput" class="sr-only">Votre question</label>
                    <input 
                        type="text" 
                        id="messageInput" 
                        placeholder="Tapez votre question ici..." 
                        maxlength="1000"
                        autocomplete="off"
                        aria-describedby="messageHelp"
                    >
                    <button 
                        type="submit" 
                        id="sendButton" 
                        disabled
                        aria-label="Envoyer le message"
                    >
                        Envoyer
                    </button>
                </div>
                <div id="messageHelp" class="sr-only">Tapez votre question et appuyez sur Entrée ou cliquez sur Envoyer</div>
            </form>
        </section>

        <!-- Documents Sidebar -->
        <aside class="documents-sidebar" id="documentsSidebar">
            <header class="documents-header">
                <h3>📚 Règles de jeux</h3>
                <button class="docs-toggle-btn close-docs-btn" onclick="window.toggleDocumentsSidebar()" title="Masquer les documents" aria-label="Masquer les documents">✕</button>
            </header>
            
            <div class="documents-list" id="documentsList" role="list" aria-label="Liste des documents disponibles">
                <!-- Documents will be loaded here -->
            </div>
        </aside>
    </main>

    <!-- Screen reader only content -->
    <div class="sr-only" aria-live="polite" id="announcements"></div>

    <!-- JavaScript Modules -->
    <script type="module" src="/static/js/app.js"></script>
</body>
</html>
